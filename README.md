# 📘 TW_Stock 前端頁面結構說明 (`index.html`)

更新日期：2025-10-23  
版本：穩定版（含爆量偵測右欄）

---

## 🏗️ 頁面總覽

`index.html` 為 TW_Stock 專案的主要前端頁面，用於顯示每日法人買賣超資料。  
頁面內容分為三個主要區塊：

### 🧩 上半部：指標觀察清單
| 區塊 | 來源檔案 | 顯示內容 |
|------|-----------|-----------|
| 🌏 外資買超投本比前10 | `insights.json` → `foreign_ratio_ranking` | 依投本比排序，顯示外資最積極買超的前10檔 |
| 🏦 投信買超投本比前10 | `insights.json` → `invest_ratio_ranking` | 同上，顯示投信前10檔 |
| 🔴 雙紅標記 | 若股票同時出現在外資與投信名單中，則以紅色加粗顯示 |

---

### ⚡ 中間區塊：新上榜 + 爆量偵測（左右並列）
使用兩欄佈局（桌機並排、手機上下排列），結構如下：

| 區塊 | 來源檔案 | 顯示邏輯 |
|------|-----------|-----------|
| 🚀 新上榜 | `newcomers.json` | 顯示外資與投信各自「與過去10日相比新出現」的前10檔股票 |
| 🔥 爆量偵測 | `explosive.json` | 顯示「法人連續買超且今日放大三倍以上」的前10檔股票 |

**爆量偵測邏輯 (v2025-10-23)：**
1. 昨日法人合計（外資+投信+自營商）為正值（買超）  
2. 今日法人合計亦為正值  
3. 今日合計張數 ≥ 昨日 × 3 倍  
4. 排除昨日合計 < 1000 張（防假爆量）  
5. 僅顯示四位數股票代號（排除 ETF、ETN 等）

---

### 📊 下半部：個股法人買賣超表格
| 功能 | 說明 |
|------|------|
| 🔍 搜尋 | 可輸入股票名稱或代號，自動帶出符合選項 |
| 📈 表格欄位 | 日期、外資、投信、自營商、合計（單位：張） |
| 🔴 正數紅色顯示 | 買超 |
| 🟢 負數綠色顯示 | 賣超 |
| 🪄 自動標題更新 | 搜尋股票後，標題會變成「法人買賣超查詢 - xxx (代號)」 |

---

## 🧠 JSON 檔案對應關係

| 檔案 | 用途 | 更新來源 |
|------|------|-----------|
| `data.json` | 主要法人買賣超資料（過去20交易日） | `docs/daily.py` |
| `insights.json` | 投本比觀察用清單 | `docs/generate_insights.py` |
| `newcomers.json` | 新上榜股票名單 | `tw_newcomers_10d_line_push.py` |
| `explosive.json` | 爆量偵測結果 | `tw_explosive_buy_line_push.py` |

---

## 🧩 前端載入順序
1. `data.json` → 建立搜尋索引與表格內容  
2. `insights.json` → 顯示法人投本比觀察清單  
3. `newcomers.json` → 顯示「新上榜」名單（左側）  
4. `explosive.json` → 顯示「爆量偵測」名單（右側）

---

## 🧭 RWD 設計重點
| 裝置 | 行為 |
|------|------|
| 桌機 | 主要容器放大 `scale-150`，雙欄佈局 |
| 手機 | 自動取消縮放，所有區塊垂直排列 |
| 樣式 | 使用 Tailwind CSS v2.2.19，無自訂 class 依賴 |

---

## 📄 更新紀錄
| 日期 | 更新項目 |
|------|-----------|
| 2025-10-23 | 新增「爆量偵測」區塊、整合 `explosive.json`、只顯示前10名 |
| 2025-10-20 | index.html 穩定版確認：雙欄佈局、scale-150 桌機放大 |
| 2025-10-07 | 新上榜判斷邏輯整合進每日 workflow |
| 2025-09-27 | 修正 TPEX JSON 介面異常處理機制 |



© Derek Tsai  CONTACT us : derektsai0428@gmail.com
