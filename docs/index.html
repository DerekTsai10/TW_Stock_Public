<div>
  <h2>🔥 熱門產業排行 (資料日期: <span id="insights-date"></span>)</h2>
  <button onclick="switchRanking('shares')">依張數</button>
  <button onclick="switchRanking('amount')">依金額</button>
  <ul id="industry-list"></ul>
</div>

<script>
let insightsData = null;
let currentMode = 'shares';

async function loadInsights() {
  const res = await fetch('docs/insights.json');
  insightsData = await res.json();
  document.getElementById('insights-date').innerText = insightsData.date;
  renderIndustryList();
}

function switchRanking(mode) {
  currentMode = mode;
  renderIndustryList();
}

function renderIndustryList() {
  const listEl = document.getElementById('industry-list');
  listEl.innerHTML = '';

  const ranking = currentMode === 'shares'
    ? insightsData.group_summary_by_shares
    : insightsData.group_summary_by_amount;

  ranking.forEach(item => {
    const li = document.createElement('li');
    if (currentMode === 'shares') {
      li.textContent = `${item.industry} - 買超 ${item.total_buy} 張 (含 ${item.stocks.join("、")})`;
    } else {
      li.textContent = `${item.industry} - 買超金額 ${Math.round(item.total_amount/1e6)} 百萬 (含 ${item.stocks.join("、")})`;
    }
    listEl.appendChild(li);
  });
}

loadInsights();
</script>
