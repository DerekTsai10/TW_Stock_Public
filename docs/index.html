<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="utf-8">
  <title>法人買賣超查詢</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="p-6 bg-gray-50 text-base">
  <!-- 動態標題 -->
  <h1 id="page-title" class="text-3xl font-bold mb-6">法人買賣超查詢</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- 左側：法人買賣超表格 -->
    <div id="trading-table" class="p-4 bg-white rounded shadow">
      <!-- 表格內容由 JS 動態產生 -->
    </div>

    <!-- 右側：EPS 折線圖 + 新上榜清單 -->
    <div class="space-y-6">
      <!-- EPS 圖表 -->
      <div id="eps-chart-container" class="p-4 bg-white rounded shadow">
        <canvas id="eps-chart"></canvas>
      </div>

      <!-- 🔥 新增的新上榜清單 -->
      <div id="newcomers-list" class="p-4 bg-white rounded shadow">
        <!-- JS 動態載入 newcomers.json -->
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  // === 載入 newcomers.json 並顯示 ===
  async function loadNewcomers() {
    try {
      const response = await fetch("newcomers.json");
      const newcomersData = await response.json();

      const container = document.getElementById("newcomers-list");
      container.innerHTML = ""; // 清空

      const date = newcomersData.date || "";
      container.innerHTML += `<h2 class="text-lg font-bold mb-2">【新上榜】 (${date})</h2>`;

      if (newcomersData.newcomers.foreign.length > 0) {
        container.innerHTML += "<p class='font-semibold mt-2'>📌 外資新上榜：</p>";
        newcomersData.newcomers.foreign.forEach(stock => {
          container.innerHTML += `<div>- ${stock.name}</div>`;
        });
      }

      if (newcomersData.newcomers.invest.length > 0) {
        container.innerHTML += "<p class='font-semibold mt-2'>📌 投信新上榜：</p>";
        newcomersData.newcomers.invest.forEach(stock => {
          container.innerHTML += `<div>- ${stock.name}</div>`;
        });
      }
    } catch (e) {
      console.error("無法載入 newcomers.json", e);
    }
  }

  document.addEventListener("DOMContentLoaded", loadNewcomers);
  </script>
</body>
</html>
