<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="utf-8">
  <title>æ³•äººè²·è³£è¶…æŸ¥è©¢</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="p-6 bg-gray-50 text-base">
  <h1 id="page-title" class="text-3xl font-bold mb-6">æ³•äººè²·è³£è¶…æŸ¥è©¢</h1>

  <!-- æ–°ä¸Šæ¦œ -->
  <div class="bg-white shadow rounded-2xl p-4 mb-6">
    <h2 class="text-xl font-bold mb-2">ğŸš€ æ–°ä¸Šæ¦œ</h2>
    <p id="newcomers-date" class="text-sm text-gray-500 mb-3">è³‡æ–™æ—¥æœŸï¼š</p>

    <div id="foreign-newcomers" class="mb-4"></div>
    <div id="invest-newcomers" class="mb-4"></div>
  </div>

  <!-- æˆäº¤é‡æš´å¢ -->
  <div class="bg-white shadow rounded-2xl p-4 mb-6">
    <h2 class="text-xl font-bold mb-2">ğŸ”¥ æˆäº¤é‡æš´å¢</h2>
    <div id="volume-spike"></div>
  </div>

  <script>
    async function loadNewcomers() {
      const res = await fetch("newcomers.json");
      const data = await res.json();

      document.getElementById("newcomers-date").innerText = "è³‡æ–™æ—¥æœŸï¼š" + data.date;

      renderNewcomerList("foreign-newcomers", "å¤–è³‡æ–°ä¸Šæ¦œ", data.newcomers.foreign);
      renderNewcomerList("invest-newcomers", "æŠ•ä¿¡æ–°ä¸Šæ¦œ", data.newcomers.invest);

      renderVolumeSpike("volume-spike", data.volume_spike);
    }

    function renderNewcomerList(containerId, title, list) {
      let html = `<h3 class="font-bold mb-1">ğŸ“Œ ${title}ï¼š</h3>`;

      if (!list || list.length === 0) {
        html += `<p class="text-gray-400">ï¼ˆç„¡ï¼‰</p>`;
        document.getElementById(containerId).innerHTML = html;
        return;
      }

      if (list.length <= 3) {
        // åªæœ‰ 3 æª”ä»¥å…§ â†’ å–®æ¬„
        html += `<ul class="list-disc list-inside space-y-1">`;
        list.forEach(s => {
          html += `<li>${s.name} (${s.stock_id}) - ${s.ratio.toFixed(2)}%</li>`;
        });
        html += `</ul>`;
      } else {
        // è¶…é 3 æª” â†’ å·¦å³å…©æ¬„
        const left = list.slice(0, 3);
        const right = list.slice(3, 6);

        html += `<div class="grid grid-cols-2 gap-4">`;

        // å·¦æ¬„
        html += `<div><ul class="list-disc list-inside space-y-1">`;
        left.forEach(s => {
          html += `<li>${s.name} (${s.stock_id}) - ${s.ratio.toFixed(2)}%</li>`;
        });
        html += `</ul></div>`;

        // å³æ¬„
        html += `<div><ul class="list-disc list-inside space-y-1">`;
        right.forEach(s => {
          html += `<li>${s.name} (${s.stock_id}) - ${s.ratio.toFixed(2)}%</li>`;
        });
        html += `</ul></div>`;

        html += `</div>`;
      }

      document.getElementById(containerId).innerHTML = html;
    }

    function renderVolumeSpike(containerId, list) {
      let html = "";

      if (!list || list.length === 0) {
        html = `<p class="text-gray-400">ï¼ˆä»Šæ—¥ç„¡æˆäº¤é‡æš´å¢è‚¡ç¥¨ï¼‰</p>`;
      } else {
        html = `<ul class="list-disc list-inside space-y-1">`;
        list.forEach(s => {
          html += `<li>${s.name} (${s.stock_id}) - ${s.ratio}x</li>`;
        });
        html += `</ul>`;
      }

      document.getElementById(containerId).innerHTML = html;
    }

    loadNewcomers();
  </script>
</body>
</html>
