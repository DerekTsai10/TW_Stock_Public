<div>
  <h2>ğŸ”¥ ç†±é–€ç”¢æ¥­æ’è¡Œ (è³‡æ–™æ—¥æœŸ: <span id="insights-date"></span>)</h2>
  <button onclick="switchRanking('shares')">ä¾å¼µæ•¸</button>
  <button onclick="switchRanking('amount')">ä¾é‡‘é¡</button>
  <ul id="industry-list"></ul>
</div>

<script>
let insightsData = null;
let currentMode = 'shares';

async function loadInsights() {
  const res = await fetch('docs/insights.json');
  insightsData = await res.json();
  document.getElementById('insights-date').innerText = insightsData.date;
  renderIndustryList();
}

function switchRanking(mode) {
  currentMode = mode;
  renderIndustryList();
}

function renderIndustryList() {
  const listEl = document.getElementById('industry-list');
  listEl.innerHTML = '';

  const ranking = currentMode === 'shares'
    ? insightsData.group_summary_by_shares
    : insightsData.group_summary_by_amount;

  ranking.forEach(item => {
    const li = document.createElement('li');
    if (currentMode === 'shares') {
      li.textContent = `${item.industry} - è²·è¶… ${item.total_buy} å¼µ (å« ${item.stocks.join("ã€")})`;
    } else {
      li.textContent = `${item.industry} - è²·è¶…é‡‘é¡ ${Math.round(item.total_amount/1e6)} ç™¾è¬ (å« ${item.stocks.join("ã€")})`;
    }
    listEl.appendChild(li);
  });
}

loadInsights();
</script>
